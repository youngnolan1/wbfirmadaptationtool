c("total_annual_informal_payments", "manager_experience_yrs", "top_manager_female"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
unique(reg_data$top_manager_female)
bla <- read_dta("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/master.dta")
bla$b7a
reg_data$c15
bla$c15
bla$k7
devtools::install_github("youngnolan1/wbfirmadaptationtool")
# WB Firm Adaptation Tool - example analysis
# Load package
library(wbfirmadaptationtool)
# MANDATORY FIRST STEP: Prep data - edit data_directory and survey arguments
reg_data <- wbfirmadaptationtool::prep_reg_data("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots", "Mexico2023")
# Climate on firm regressions - edit level_or_deviation and output_directory
# Export summary charts for heat days, temperature, and temperature volatility
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "level", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "deviation", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
# Export regression tables
wbfirmadaptationtool::climate_on_firm_regs_tables(reg_data, "level", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
wbfirmadaptationtool::climate_on_firm_regs_tables(reg_data, "deviation", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
# Climate interacted with firm characteristics regressions - edit firm_outcome, climate_var, firm_characteristics, and output_directory
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "heat_days_deviation",
c("total_annual_informal_payments", "manager_experience_yrs", "top_manager_female"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
# Climate interacted with firm characteristics regressions - edit firm_outcome, climate_var, firm_characteristics, and output_directory
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("freq_water_shortages", "length_water_shortages", "insufficient_water_supply"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
reg_data$freq_water_shortages
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("length_water_shortages", "insufficient_water_supply"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
reg_data$length_water_shortages
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("insufficient_water_supply"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "heat_days_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
# Climate interacted with firm characteristics regressions - edit firm_outcome, climate_var, firm_characteristics, and output_directory
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
# WB Firm Adaptation Tool - example analysis
# Load package
library(wbfirmadaptationtool)
# MANDATORY FIRST STEP: Prep data - edit data_directory and survey arguments
reg_data <- wbfirmadaptationtool::prep_reg_data("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots", "Mexico2023")
# Climate interacted with firm characteristics regressions - edit firm_outcome, climate_var, firm_characteristics, and output_directory
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "heat_days_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "heat_days_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "tempvolatility_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "tempvolatility_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
summary(reg_data$invest_fixed_assets_dummy)
table(reg_data$invest_fixed_assets_dummy)
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "tempvolatility_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "tempvolatility_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "invest_fixed_assets_dummy", "temp_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales)", "temp_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(sales_per_worker)", "temp_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("young", "small", "obstacle_accesstofinance"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions1.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("obstacle_businesslicensing", "obstacle_traderegulations", "obstacle_laborregulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions2.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("obstacle_corruption", "obstacle_transport", "obstacle_electricity"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions3.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("inputs_domestic", "freq_meetings_tax_officials", "pcnt_time_dealing_regulations"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions4.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("overdraft_facility", "financial_inst_credit", "checking_savings_account"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions5.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("length_power_outage", "pcnt_sales_losses_dueto_power_outages"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions6.html")
wbfirmadaptationtool::interaction_reg_table(reg_data, "log(wages)", "temp_deviation",
c("manager_experience_yrs", "top_manager_female", "total_annual_informal_payments"),
"C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output/interactions7.html")
summary(reg_data$temp_deviation)
summary(reg_data$tempvolatility_deviation)
summary(reg_data$heat_days_deviation)
# Load libraries
library(dplyr)
library(readxl)
# Set working directory - ADJUST FILE PATH HERE
setwd("C:/Users/young/OneDrive/Escritorio/wb-climate-pilots-bangladesh")
# Load SMI 2019 business directory
business <- read_excel("raw_data/business_directory_2019/Business _Directory_2019.xlsx")
# National broad sectors table/pie
sectors <- business %>%
dplyr::select(Establishment_cd, division_id, division_name_eng, BSIC, ClassDescription, mTPE) %>%
mutate(BSIC = as.numeric(BSIC)) %>%
mutate(sector = case_when(
between(BSIC, 0111, 0322) ~ "A",
between(BSIC, 0510, 0990) ~ "B",
between(BSIC, 1010, 3320) ~ "C",
between(BSIC, 3510, 3530) ~ "D",
between(BSIC, 3600, 3900) ~ "E",
between(BSIC, 4100, 4390) ~ "F",
between(BSIC, 4510, 4799) ~ "G",
between(BSIC, 4911, 5320) ~ "H",
between(BSIC, 5510, 5630) ~ "I",
between(BSIC, 5811, 6399) ~ "J",
between(BSIC, 6411, 6630) ~ "K",
between(BSIC, 6810, 6820) ~ "L",
between(BSIC, 6910, 7490) ~ "M",
between(BSIC, 7500, 8299) ~ "N",
between(BSIC, 8411, 8430) ~ "O",
between(BSIC, 8510, 8550) ~ "P",
between(BSIC, 8610, 9499) ~ "Q",
between(BSIC, 9511, 9529) ~ "R",
between(BSIC, 9601, 9609) ~ "S",
between(BSIC, 9700, 9820) ~ "T",
BSIC == 9900 ~ "U"
)) %>%
mutate(broad_sector = case_when(
sector == "A" ~ "aAgriculture",
sector == "C" ~ "bManufacturing",
sector %in% c("F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S") ~ "cServices",
sector %in% c("B", "D", "E", "T", "U") ~ "dOther"
))
sector_chart <- sectors %>%
group_by(broad_sector) %>%
na.omit() %>%
summarise(sector_counts = n()) %>%
mutate(prop = (sector_counts/sum(sector_counts))*100) %>%
mutate(prop = round(prop, 2)) %>%
rename(Sector = broad_sector) %>%
dplyr::select(-sector_counts)
View(sector_chart)
label_data <- sector_chart %>%
filter(Sector %in% c("bManufacturing", "cServices"))
View(label_data)
sector_firm_share_plot <- ggplot(data = sector_chart, aes(x = "", y = prop, fill = Sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = sub('.', '', paste0(Sector, "\n", prop, "%"))), position = position_stack(vjust = 0.4), size = 7) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "none",
axis.text = element_blank(),
axis.title = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
panel.grid = element_blank()
)
library(ggplot2)
sector_firm_share_plot <- ggplot(data = sector_chart, aes(x = "", y = prop, fill = Sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = sub('.', '', paste0(Sector, "\n", prop, "%"))), position = position_stack(vjust = 0.4), size = 7) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "none",
axis.text = element_blank(),
axis.title = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
panel.grid = element_blank()
)
sector_firm_share_plot
# Libraries
library(dplyr)
library(tidyr)
library(ggplot2)
library(readxl)
library(haven)
# Working directory
setwd("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots")
# Read data
es_mexico <- read_dta("master.dta") %>%
filter(country == "Mexico2023")
# Clean data
firms_sectors <- es_mexico %>%
dplyr::select(idstd, wt, stra_sector) %>%
drop_na(idstd) %>%
group_by(stra_sector) %>%
summarise(n = sum(wt)) %>%
mutate(prop = round(n/sum(n), 2)) %>%
select(-n)
View(firms_sectors)
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "none",
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
)
firms_sectors_plot
label_data <- firms_sectors %>%
filter(stra_sector %in% c("Other Manufacturing", "Other Services", "Retail"))
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "none",
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
)
firms_sectors_plot
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "right",  # Position the legend on the right (you can adjust this as needed)
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
) +
guides(fill = guide_legend(title = "Sectors"))  # Add a guide for the legend
firms_sectors_plot
# Export chart
ggsave("Mexico/output/Firms_Sectors_Mexico.png", firms_sectors_plot, width = 2000, height = 1700, units = "px")
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "right",  # Position the legend on the right
legend.text = element_text(size = 14),  # Increase the legend text size
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
) +
guides(fill = guide_legend(title = "Sectors"))  # Add a guide for the legend
# Export chart
ggsave("Mexico/output/Firms_Sectors_Mexico.png", firms_sectors_plot, width = 2000, height = 1700, units = "px")
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "right",  # Position the legend on the right
legend.text = element_text(size = 14),  # Increase the legend text size
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
) +
guides(fill = guide_legend(title = ""))  # Add a guide for the legend
# Export chart
ggsave("Mexico/output/Firms_Sectors_Mexico.png", firms_sectors_plot, width = 2000, height = 1700, units = "px")
# Chart
firms_sectors_plot <- ggplot(data = firms_sectors, aes(x = "", y = prop, fill = stra_sector)) +
geom_bar(stat = "identity", width = 1, color = "white") +
geom_text(data = label_data, aes(label = stra_sector), position = position_stack(vjust = 0.5), size = 6) +
scale_fill_brewer(palette = "Dark2") +
coord_polar(theta = "y") +
theme_minimal() +
theme(
legend.position = "bottom",
legend.text = element_text(size = 14),  # Increase the legend text size
axis.text = element_blank(),
axis.title = element_blank(),
panel.grid = element_blank()
) +
guides(fill = guide_legend(title = ""))  # Add a guide for the legend
firms_sectors_plot
# Export chart
ggsave("Mexico/output/Firms_Sectors_Mexico.png", firms_sectors_plot, width = 2000, height = 1700, units = "px")
library(devtools)
devtools::install_github("youngnolan1/wbfirmadaptationtool")
# Load package
library(wbfirmadaptationtool)
# MANDATORY FIRST STEP: Prep data - edit data_directory and survey arguments
reg_data <- wbfirmadaptationtool::prep_reg_data("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots", "Mexico2023")
# Export summary charts for heat days, temperature, and temperature volatility
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "level", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "deviation", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
wbfirmadaptationtool::climate_on_firm_regs_charts
devtools::build(wbfirmadaptationtool)
# Load package
library(wbfirmadaptationtool)
devtools::build()
devtools::document()
# Load package
library(wbfirmadaptationtool)
# MANDATORY FIRST STEP: Prep data - edit data_directory and survey arguments
reg_data <- wbfirmadaptationtool::prep_reg_data("C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots", "Mexico2023")
# Export summary charts for heat days, temperature, and temperature volatility
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "level", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
wbfirmadaptationtool::climate_on_firm_regs_charts(reg_data, "deviation", "C:/Users/young/OneDrive/Escritorio/wbfirmadaptation_snapshots/Mexico/output")
devtools::build()
devtools::document()
library(wbfirmadaptationtool)
devtools::install_github("youngnolan1/wbfirmadaptationtool")
devtools::install_github("youngnolan1/wbfirmadaptationtool")
devtools::install_github("youngnolan1/wbfirmadaptationtool")
